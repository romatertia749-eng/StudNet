# Проверка подключения к бэкенду

## Автоматическая проверка

Приложение автоматически проверяет доступность бэкенда перед отправкой данных. Если бэкенд недоступен, будет показан компонент диагностики с подробной информацией.

## Ручная проверка через скрипт

Используйте скрипт `check_backend.js` для проверки доступности бэкенда:

```bash
# Проверка с URL по умолчанию (localhost:8080)
node check_backend.js

# Проверка с указанным URL
node check_backend.js http://localhost:8080

# Проверка продакшн сервера
node check_backend.js https://your-backend-url.com
```

## Настройка переменных окружения

### Для локальной разработки

Создайте файл `.env` в корне проекта:

```env
REACT_APP_API_BASE_URL=http://localhost:8080
```

### Для продакшена

Установите переменную окружения на вашем хостинге (Vercel, Netlify и т.д.):

```env
REACT_APP_API_BASE_URL=https://your-backend-url.com
```

## Проверка в браузере

Откройте консоль разработчика (F12) и проверьте логи:

```
API_BASE_URL: http://localhost:8080
REACT_APP_API_BASE_URL from env: http://localhost:8080
```

## Типичные проблемы

### 1. "Failed to Fetch"

**Причина:** Бэкенд не запущен или недоступен

**Решение:**
- Проверьте, запущен ли бэкенд: `cd backend_python && uvicorn app.main:app --reload --port 8080`
- Проверьте URL в `.env` файле
- Убедитесь, что порт 8080 не занят другим приложением

### 2. CORS ошибка

**Причина:** Бэкенд не разрешает запросы с вашего домена

**Решение:**
- Добавьте ваш домен в `CORS_ORIGINS` в `.env` бэкенда
- Или добавьте в `FRONTEND_URL` в `.env` бэкенда

### 3. 404 Not Found

**Причина:** Неправильный URL эндпоинта

**Решение:**
- Проверьте, что бэкенд запущен и доступен по указанному URL
- Проверьте `/health` эндпоинт: `http://localhost:8080/health`

### 4. Timeout

**Причина:** Сервер не отвечает в течение 5 секунд

**Решение:**
- Проверьте, что бэкенд запущен
- Проверьте сетевые настройки и файрвол
- Увеличьте таймаут в коде (не рекомендуется)

## Компонент диагностики

Компонент `BackendStatus` автоматически показывается при ошибках подключения и отображает:

- Статус подключения (доступен/недоступен)
- URL сервера
- Детали ошибки
- Список доступных эндпоинтов
- Рекомендации по исправлению

## Health Check эндпоинт

Бэкенд должен иметь эндпоинт `/health`, который возвращает:

```json
{
  "status": "ok"
}
```

Этот эндпоинт используется для проверки доступности сервера.

