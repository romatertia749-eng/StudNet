# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. Health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç: `{"status":"ok"}`
2. Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω
3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ API

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ localhost –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# Health endpoint
curl -s http://localhost/health
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok"}

# API endpoint (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É API, –Ω–µ HTML)
curl -s -I http://localhost/api/profiles/
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å Content-Type: application/json
# –ò–ª–∏ –æ—à–∏–±–∫—É 401/404, –Ω–æ –ù–ï HTML

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
curl -s "http://localhost/api/profiles/?user_id=123&page=0&size=10"
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON –æ—Ç–≤–µ—Ç –∏–ª–∏ –æ—à–∏–±–∫—É API
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç—É–Ω–Ω–µ–ª—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

1. **Health endpoint:**
   - URL: `https://rica-student-trusted-puzzle.trycloudflare.com/health`
   - –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: `{"status":"ok"}`

2. **API endpoint:**
   - URL: `https://rica-student-trusted-puzzle.trycloudflare.com/api/profiles/`
   - –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 422 –∏–ª–∏ 401), –Ω–æ –ù–ï HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Network**
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–Ω–∫–µ—Ç—ã
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å—ã:
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `https://rica-student-trusted-puzzle.trycloudflare.com/api/profiles/`
   - Status –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200, 401, 422 –∏ —Ç.–¥., –Ω–æ –ù–ï 404
   - Response –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å JSON, –∞ –Ω–µ HTML

## ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
```
conflicting server name "_" on 0.0.0.0:80, ignored
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ server –±–ª–æ–∫–æ–≤. –≠—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –ª—É—á—à–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
# –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã —Å server_name "_"
grep -r "server_name _" /etc/nginx/conf.d/ /etc/nginx/sites-enabled/

# –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã (–æ—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π)
# –ù–∞–ø—Ä–∏–º–µ—Ä:
mv /etc/nginx/sites-enabled/default /etc/nginx/sites-enabled/default.disabled
# –∏–ª–∏
mv /etc/nginx/conf.d/old.conf /etc/nginx/conf.d/old.conf.disabled

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ
nginx -t
systemctl reload nginx
```

## üêõ –ï—Å–ª–∏ API –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Nginx

```bash
# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -50 /var/log/nginx/error.log

# –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞
tail -50 /var/log/nginx/access.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -T | grep -A 10 "location /api"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ proxy_pass –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
nginx -T | grep "proxy_pass.*8000"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞

```bash
# –°—Ç–∞—Ç—É—Å –±—ç–∫–µ–Ω–¥–∞
systemctl status studnet-backend.service

# –õ–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞
journalctl -u studnet-backend.service -n 50 --no-pager

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä—è–º—É—é
curl -s http://127.0.0.1:8000/api/profiles/
```

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. ‚úÖ Health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç: `{"status":"ok"}`
2. ‚úÖ API –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ –±—ç–∫–µ–Ω–¥ (–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON, –Ω–µ HTML)
3. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ API
4. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "Failed to fetch" –∏–ª–∏ CORS –æ—à–∏–±–æ–∫

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Telegram
3. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ CORS - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥ (—á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è CORS)
4. –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)


