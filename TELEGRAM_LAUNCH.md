# Запуск приложения в Telegram

## Шаг 1: Убедись, что всё работает локально

**Бэкенд:**
```powershell
cd backend_python
.\venv\Scripts\uvicorn.exe app.main:app --reload --port 8080
```
Должен быть доступен на `http://localhost:8080`

**Фронтенд:**
```powershell
npm start
```
Должен быть доступен на `http://localhost:3000`

---

## Шаг 2: Установи ngrok

**Вариант 1: Через winget (Windows):**
```powershell
winget install ngrok
```

**Вариант 2: Скачай вручную:**
1. Перейди на https://ngrok.com/download
2. Скачай для Windows
3. Распакуй `ngrok.exe` в папку (например, `C:\ngrok\`)
4. Добавь в PATH или используй полный путь

**Вариант 3: Через Chocolatey:**
```powershell
choco install ngrok
```

---

## Шаг 3: Запусти ngrok для фронтенда

**В новом терминале:**
```powershell
ngrok http 3000
```

**Или если ngrok не в PATH:**
```powershell
C:\путь\к\ngrok.exe http 3000
```

**Скопируй HTTPS URL** (например: `https://abc123.ngrok.io`)

---

## Шаг 4: Запусти ngrok для бэкенда

**В еще одном терминале:**
```powershell
ngrok http 8080
```

**Скопируй HTTPS URL** (например: `https://xyz789.ngrok.io`)

---

## Шаг 5: Обнови .env для фронтенда

Создай/обнови `.env` в корне проекта:
```env
REACT_APP_API_BASE_URL=https://xyz789.ngrok.io
```

**Важно:** Используй URL от бэкенда (порт 8080), не от фронтенда!

---

## Шаг 6: Перезапусти фронтенд

Останови `npm start` (Ctrl+C) и запусти снова:
```powershell
npm start
```

---

## Шаг 7: Обнови URL в BotFather

1. Открой Telegram, найди `@BotFather`
2. Команда `/myapps`
3. Выбери своё приложение
4. Команда `Edit Web App URL`
5. Вставь URL от фронтенда (порт 3000): `https://abc123.ngrok.io`
6. Готово!

---

## Шаг 8: Открой приложение в Telegram

1. Открой своего бота в Telegram
2. Нажми на кнопку с приложением (или команда `/start`)
3. Приложение должно открыться!

---

## Важно!

**ngrok бесплатный план:**
- URL меняется при каждом перезапуске ngrok
- Нужно обновлять URL в BotFather каждый раз
- Для постоянного URL нужен платный план или деплой на Vercel/Railway

**Для постоянного решения:**
1. Деплой фронтенда на Vercel (бесплатно)
2. Деплой бэкенда на Railway/Render (бесплатно)
3. Обнови URL в BotFather один раз

---

## Проверка

**Если что-то не работает:**

1. **Проверь, что оба ngrok запущены:**
   - Фронтенд: `ngrok http 3000`
   - Бэкенд: `ngrok http 8080`

2. **Проверь .env:**
   - `REACT_APP_API_BASE_URL` должен указывать на бэкенд (8080)

3. **Проверь консоль браузера (F12):**
   - Должны быть запросы к бэкенду
   - Не должно быть CORS ошибок

4. **Проверь логи бэкенда:**
   - Должны быть входящие запросы

---

## Быстрый чеклист

- [ ] Бэкенд запущен на `localhost:8080`
- [ ] Фронтенд запущен на `localhost:3000`
- [ ] ngrok для фронтенда: `ngrok http 3000`
- [ ] ngrok для бэкенда: `ngrok http 8080`
- [ ] `.env` обновлен с URL бэкенда
- [ ] Фронтенд перезапущен
- [ ] URL в BotFather обновлен
- [ ] Приложение открыто в Telegram

